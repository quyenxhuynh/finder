language: python
python: "3.6"
      env:
        GDALVERSION="2.3.3"
        PROJVERSION="4.9.3"
    - python: "3.6"
      env:
        GDALVERSION="2.4.4"
        PROJVERSION="4.9.3"
    - python: "3.7"
      env:
        GDALVERSION="2.4.4"
        PROJVERSION="4.9.3"
    - python: "3.8"
      env:
        GDALVERSION="2.4.4"
        PROJVERSION="4.9.3"
    - python: "3.6"
      env:
        GDALVERSION="3.0.4"
        PROJVERSION="6.2.1"
    - python: "3.7"
      env:
        GDALVERSION="3.0.4"
        PROJVERSION="6.2.1"
    - python: "3.8"
      env:
        GDALVERSION="3.0.4"
        PROJVERSION="6.2.1"
    - python: "3.8"
      env:
        GDALVERSION="master"
        PROJVERSION="6.2.1"
  allow_failures:
    - env:
        GDALVERSION="master"
        PROJVERSION="6.2.1"

before_install:
 - ./gdal/ci/travis/${BUILD_NAME}/before_install.sh

install:
- pip install -r requirements-travis.txt
- ./gdal/ci/travis/${BUILD_NAME}/install.sh

script:
- python manage.py test
- ./gdal/ci/travis/${BUILD_NAME}/script.sh

deploy:
  provider: heroku
  api_key:
    secure: e058839e-10e5-4205-916b-15fdd44abd08
  app: finder-1-29
  on:
    repo: uva-cs3240-f20/finder-1-29
